<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>UDES_PWD</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.2.3/css/buttons.dataTables.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pragati+Narrow&display=swap" rel="stylesheet">
	<style type="text/css">
		body, #demo {
			background-color: #066D86;
			background-image: url('images/background.png');
			background-size: 100px 100px;
		}
	</style>
</head>
<body>
<div class="m-0 p-0 bg-dark">
	<div class="container-fluid d-flex justify-content-between">
		<div class="d-flex justify-content-start">
	    	<img src="images/logo.png" class="rounded float-left d-none d-md-block" alt="..." style="max-height:100px;">
	        <p class="text-light text-decoration-none fw-bold fs-2 ms-3" >
	        	उत्तराखंड डिप्लोमा इंजीनियर्स संघ <small class="fw-semibold text-danger"><br>लोक निर्माण विभाग</small>
	        </p>
		</div>
    </div>
</div>
<div class="m-0 p-0 bg-lignt">
    <nav class="navbar navbar-expand-lg navbar-dark p-1 m-0" >
			<div class="container-fluid d-flex justify-content-end">
				<div class="btn-group" role="group" aria-label="Basic example">
				  	<a href="index.html" type="button" class="btn btn-sm btn-outline-light">
			    		<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16">
						  <path fill-rule="evenodd" d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6zm5-.793V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
						  <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
						</svg>
					</a>
				  	<a href="register.html" type="button" class="btn btn-sm btn-light disabled">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
						  <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
						  <path fill-rule="evenodd" d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"/>
						  <path d="M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
						</svg>
				  		सदस्यता रजिस्टर
				  	</a>
				</div>
		    </div>
	    </nav>
</div>
<div class="row ms-3">
	<div class="col-md-auto">
		    <select class="column_filter" id="col7_filter" data-column="7"> </select>
	</div>
	<div class="col-md-auto">
		    <select class="column_filter" id="col6_filter" data-column="6"> </select>
	</div>
	<div class="col-md-auto">
		    <select class="column_filter" id="col8_filter" data-column="8"> </select>
	</div>
	
</div>
<div class="table-responsive bg-light  m-3" >
	<table id="example" class="table table-sm table-bordered" style="font-family: 'Pragati Narrow', sans-serif; width:100%">
		<thead>
			<tr class="text-center align-middle fw-bold text-white " style="background-color: #2632F0;">
				<td>सदस्यता<br>क्रमांक </td>
				<td>सदस्य का नाम </td>
				<td>पिता/ पति का नाम </td>
				<td>कार्मिक कोड</td> <!-- <br>/ फोन न -->
				<td>जन्म<br>तिथि</td>
				<td>Joining<br>Date</td>
				<td>पद</td>
				<td>कार्यालय</td>
				<td>टिप्पणी</td>
			</tr>
		</thead>
		<tbody >
			
		</tbody>
	</table>
</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>

<script src="data/members.js"></script>
<script type="text/javascript">
	var offices = [];
	var	designations = [];
	var	remark = [];

	$.each(members, function(key, value) {
	    offices.push(value.office);
	    remark.push(value.remark);
	    designations.push(value.short_post);
	});

	offices = offices.filter((x, i, a) => a.indexOf(x) == i)
	designations = designations.filter((x, i, a) => a.indexOf(x) == i)
	remark = remark.filter((x, i, a) => a.indexOf(x) == i)

	var officeoptions = '<option value="">All Offices</option>';
		for (var i = 0; i < offices.length; i++) {
		   officeoptions += '<option value="' + offices[i]+ '">' + offices[i] + '</option>';
		}
		$("#col7_filter").html(officeoptions);
	var designationoptions = '<option value="">All Designations</option>';
		for (var i = 0; i < designations.length; i++) {
		   designationoptions += '<option value="' + designations[i]+ '">' + designations[i] + '</option>';
		}
		$("#col6_filter").html(designationoptions);
	var statusoptions = '<option value="">All Status</option>';
		for (var i = 0; i < remark.length; i++) {
		   statusoptions += '<option value="' + remark[i]+ '">' + remark[i] + '</option>';
		}
		$("#col8_filter").html(statusoptions);

	function filterColumn(i) {
	   	let t = $("#col" + i + "_filter option:selected").text();
	   	if(t.startsWith("All")){
	   		$('#example').DataTable().column(i).search("").draw();
	   	}else{
	    	$('#example').DataTable().column(i).search(t).draw();
	   	}
	}

	$(document).ready( function () {
		var table = $('#example').dataTable( {
			"dom": 'fBrtip',
			'buttons': [
				'pageLength',
				{
				    extend: 'print',
				    text: 'Print',
				    exportOptions: {
				        stripHtml: false
				    }
				}
				
			],
		    /*"buttons": [
		            'pageLength','print'
		        ],*/
		    "lengthMenu": [
		        [ 15, 30, 100, -1 ],
		        [ '15 rows', '30 rows','100 rows', 'Show all' ]
		    ],
		    "data": members ,
		    "columns": [
		        {  data: "membership_no" },
		        {  data: function ( row, type, val, meta ) {
			        	if(row["name"]){
			        		return row["name_h"] + "<br><span class='fst-italic'>" + row["name"]+ "</span>";
			        	}else{
			        		return row["name_h"];
			        	}
		        	}
			    },
		        {  data: function ( row, type, val, meta ) {
			        	if(row["father_name"]){
			        		return row["father_name_h"] + "<br><span class='fst-italic'>" + row["father_name"]+ "</span>";
			        	}else{
			        		return row["father_name_h"];
			        	}	
		        	}
			    },
		        {  data: function ( row, type, val, meta ) {
		        		if(row["emp_id"]){
			        		return row["emp_id"]; //+"<br>"+row["phone"]
		        		}else{
		        			return "";
		        		}
		        	}
			    },
			    { data: "dob" },
			    { data: "doj" },
			    { data: function ( row, type, val, meta ) {
			        	if(row["prabhari"] == 1){
			        		return row["short_post"]+"<br><span class='fst-italic'>(प्रभारी)</span>";
			        	}else{
			        		return row["short_post"];
			        	}
		        	}
			    },
			    { data: "office" },
		        { data: "remark" },
		    ],
		    columnDefs: [
			    { className: 'text-left', targets: [1,2] },
			    { className: 'text-center', targets: [0,3,4,5,6,7,8] },
			  ],
		    rowCallback: function(row, data, index){
	            if ( data.remark != '---') {
	                $('td', row).css('background-color', '#FDFAB9');
	            }
		    },
		   
		} );

/*	    $('select.column_filter').on('keyup click', function () {
	        filterColumn($(this).attr('data-column'));
	    });*/

	    $('#col7_filter').change(function () { filterColumn(7); });
	    $('#col6_filter').change(function () { filterColumn(6); });
	    $('#col8_filter').change(function () { filterColumn(8); });
	} );
</script>
</html>
